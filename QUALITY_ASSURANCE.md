# å“è³ªä¿è¨¼ãƒ»ãƒ‡ã‚°ãƒ¬é˜²æ­¢å¯¾ç­–

**ä½œæˆæ—¥**: 2025-11-14
**ç›®çš„**: ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘åŒ–ã«ä¼´ã†ãƒ‡ã‚°ãƒ¬ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ç ´ç¶»ã®é˜²æ­¢

---

## ğŸ“‹ å®Ÿè£…ã—ãŸå¯¾ç­–ä¸€è¦§

### âœ… 1. ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

#### çµ±åˆãƒ†ã‚¹ãƒˆ ([tests/test_integration.py](tests/test_integration.py))
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ãƒ†ã‚¹ãƒˆï¼ˆå¤–éƒ¨ã‚­ãƒ¼ã€6è‰‡åˆ¶ç´„ï¼‰
- ç‰¹å¾´é‡ç”Ÿæˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
- äºˆæ¸¬ç¢ºç‡ã®åˆè¨ˆæ¤œè¨¼
- KellyåŸºæº–è¨ˆç®—ã®å¦¥å½“æ€§ãƒ†ã‚¹ãƒˆ
- AIè§£æç”¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ ([tests/test_core_logic.py](tests/test_core_logic.py))
- KellyåŸºæº–è¨ˆç®—ãƒ†ã‚¹ãƒˆï¼ˆæ­£/è² ã®æœŸå¾…å€¤ã€ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼‰
- ç¢ºç‡è¨ˆç®—ãƒ»æ­£è¦åŒ–ãƒ†ã‚¹ãƒˆ
- ç‰¹å¾´é‡ã®å€¤ç¯„å›²æ¤œè¨¼
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ†ã‚¹ãƒˆï¼ˆç€é †ã€æ±ºã¾ã‚Šæ‰‹ï¼‰

#### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python run_tests.py

# å€‹åˆ¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python -m pytest tests/test_integration.py -v
python -m pytest tests/test_core_logic.py -v
```

### âœ… 2. ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ([src/validation/data_validator.py](src/validation/data_validator.py))

#### æ©Ÿèƒ½
- ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆå‹ã€å¿…é ˆã€ç¯„å›²ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥å‰ã®è‡ªå‹•æ¤œè¨¼
- ç‰¹å¾´é‡ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯

#### ä½¿ç”¨ä¾‹
```python
from src.validation.data_validator import DataValidator

# ãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
is_valid, errors = DataValidator.validate_race(race_data)
if not is_valid:
    for error in errors:
        print(f"ã‚¨ãƒ©ãƒ¼: {error}")

# ç‰¹å¾´é‡ã®æ¤œè¨¼
is_valid, errors = FeatureValidator.validate_features(features_df)
```

#### æ¤œè¨¼é …ç›®
- **ãƒ¬ãƒ¼ã‚¹åŸºæœ¬æƒ…å ±**: venue_code (01-24), race_number (1-12)
- **å‡ºèµ°è¡¨**: pit_number (1-6), racer_rank (A1/A2/B1/B2), å‹ç‡ (0-10)
- **çµæœ**: rank (1-6/F/L/K/S), kimarite (1-6)
- **æ°—è±¡**: æ°—æ¸© (-20-50), é¢¨é€Ÿ (0-30), æ³¢é«˜ (0-50)
- **ç‰¹å¾´é‡**: å€¤ç¯„å›²ã€NaN/Infæ¤œå‡º

---

## ğŸ”„ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®æ‰‹é †

```
[1] æ©Ÿèƒ½è¿½åŠ ãƒ»ä¿®æ­£
    â†“
[2] é–¢é€£ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
    â””â”€ python -m pytest tests/test_XXX.py -v
    â†“
[3] ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã®ç¢ºèª
    â””â”€ DataValidator.validate_xxx()
    â†“
[4] å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    â””â”€ python run_tests.py
    â†“
[5] ãƒ†ã‚¹ãƒˆåˆæ ¼ â†’ ã‚³ãƒŸãƒƒãƒˆ
```

### ãƒªãƒªãƒ¼ã‚¹å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] å…¨ãƒ†ã‚¹ãƒˆåˆæ ¼ï¼ˆpytestï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ç¢ºèª
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
- [ ] æ‰‹å‹•å‹•ä½œç¢ºèªï¼ˆStreamlit UIï¼‰
- [ ] [TESTING_GUIDE.md](TESTING_GUIDE.md) ã®ç¢ºèª

---

## ğŸ¯ ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ä¸»è¦ãƒ­ã‚¸ãƒƒã‚¯

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
1. **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°** â†’ ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ â†’ DBæŒ¿å…¥
2. **ç‰¹å¾´é‡ç”Ÿæˆ** â†’ å€¤ç¯„å›²æ¤œè¨¼ â†’ ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬
3. **ç¢ºç‡è¨ˆç®—** â†’ åˆè¨ˆ=1æ¤œè¨¼ â†’ KellyåŸºæº–
4. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ** â†’ ã‚¯ã‚¨ãƒªå®Ÿè¡Œãƒ†ã‚¹ãƒˆ

### é‡è¦è¨ˆç®—
- KellyåŸºæº–ã®æœŸå¾…å€¤è¨ˆç®—
- ç¢ºç‡ã®æ­£è¦åŒ–
- ä¸‰é€£å˜ç¢ºç‡è¨ˆç®—
- ãƒ‡ãƒ¼ã‚¿å‹ãƒ»ç¯„å›²ã®æ•´åˆæ€§

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¾‹

```bash
$ python run_tests.py

================================================================================
BoatRace ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
å®Ÿè¡Œæ—¥æ™‚: 2025-11-14 17:00:00
================================================================================

tests/test_core_logic.py::TestKellyCalculation::test_positive_expected_value PASSED
tests/test_core_logic.py::TestKellyCalculation::test_negative_expected_value PASSED
tests/test_core_logic.py::TestProbabilityCalculation::test_probability_normalization PASSED
tests/test_integration.py::TestDataFlow::test_database_integrity PASSED
tests/test_integration.py::TestDataFlow::test_feature_generation_pipeline PASSED
tests/test_integration.py::TestDataExport::test_export_query_execution PASSED

================================================================================
âœ… å…¨ãƒ†ã‚¹ãƒˆåˆæ ¼ (6 passed in 3.45s)
================================================================================
```

---

## ğŸš€ ä»Šå¾Œã®æ‹¡å¼µ

### çŸ­æœŸï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ
- âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- âœ… ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ä¸­æœŸï¼ˆæ¨å¥¨ï¼‰
- â³ ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šï¼ˆpytest-covï¼‰
- â³ CI/CDçµ±åˆï¼ˆGitHub Actionsï¼‰
- â³ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### é•·æœŸï¼ˆæ¤œè¨ï¼‰
- â³ E2Eãƒ†ã‚¹ãƒˆï¼ˆSeleniumï¼‰
- â³ ãƒ¢ãƒƒã‚¯ãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£æ‹¡å……
- â³ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è‡ªå‹•ç”Ÿæˆ

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [TESTING_GUIDE.md](TESTING_GUIDE.md) - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¬ã‚¤ãƒ‰
- [SYSTEM_LOGIC_ANALYSIS.md](SYSTEM_LOGIC_ANALYSIS.md) - ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚¸ãƒƒã‚¯è©³ç´°

---

## âš ï¸ æ³¨æ„äº‹é …

### pytestã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
åˆå›å®Ÿè¡Œå‰ã«ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š
```bash
pip install pytest pytest-xdist
```

ã¾ãŸã¯ï¼š
```bash
pip install -r requirements.txt
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ­ãƒƒã‚¯
ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ã€Streamlitã‚¢ãƒ—ãƒªã‚’åœæ­¢ã—ã¦ãã ã•ã„ï¼š
```bash
# ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
tasklist /FI "IMAGENAME eq python.exe"

# å¿…è¦ã«å¿œã˜ã¦åœæ­¢
taskkill /F /PID <PID>
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š
1. [TESTING_GUIDE.md](TESTING_GUIDE.md) ã®ã€Œã‚ˆãã‚ã‚‹è³ªå•ã€ã‚’ç¢ºèª
2. ãƒ†ã‚¹ãƒˆãƒ­ã‚°ã‚’ç¢ºèªï¼ˆ`pytest -v --tb=long`ï¼‰
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ã‚’ç¢ºèª

---

**æœ€çµ‚æ›´æ–°**: 2025-11-14
