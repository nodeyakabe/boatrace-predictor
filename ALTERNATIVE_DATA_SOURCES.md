# 代替データソースの調査

**調査日**: 2024-10-30
**目的**: HTMLスクレイピングより高速なデータ取得方法

---

## ユーザーからの質問

> 対象のページを一括でCSVなどででDLしたりはできないの？

**回答**: BOATRACEの公式サイトには一括DL機能はありませんが、以下の代替案があります。

---

## 代替案1: BOATRACE公式API（非公開）❌

**現状**: 一般には公開されていない

**可能性**:
- モバイルアプリが使用しているAPIがある可能性
- ただし、リバースエンジニアリングはTOS違反のリスク

**判定**: ❌ 不採用

---

## 代替案2: オッズパークAPI 🟡

**概要**: オッズパークが提供するデータAPI

**調査結果**:
- オッズパークはJRAや地方競馬のAPI提供
- **競艇は未確認**

**次のステップ**:
- オッズパーク競艇サイトを調査
- APIドキュメント確認

**判定**: 🟡 要調査

---

## 代替案3: 競艇データベースサービス 🟢

**概要**: 有料/無料の競艇データベースサービス

**候補**:
1. **BOAT RACE Official Data** - 公式データ販売
2. **競艇予想サイトのデータ** - 一部サイトがCSV提供
3. **Kaggleデータセット** - 過去データの可能性

**調査方法**:
```bash
# WebSearchで検索
- "競艇 データ CSV ダウンロード"
- "競艇 API オッズパーク"
- "BOATRACE official data download"
```

**判定**: 🟢 有望

---

## 代替案4: ブラウザ自動化（Selenium/Playwright）⚡

**概要**: ブラウザを自動化してJavaScript実行後のデータ取得

**メリット**:
- JavaScript実行後のデータ取得可能
- より確実なデータ取得

**デメリット**:
- requestsより遅い（ブラウザ起動オーバーヘッド）
- メモリ消費大

**期待時間**:
- 現在: 9.72秒/リクエスト（requests + BeautifulSoup）
- Selenium: 15-20秒/リクエスト
- **改悪する可能性大**

**判定**: ❌ 不採用（遅くなる）

---

## 代替案5: アーカイブサイト（Internet Archive）🟡

**概要**: Internet Archiveに保存されたページ

**調査方法**:
```python
# Wayback Machine API
url = "https://web.archive.org/cdx/search/cdx"
params = {
    'url': 'https://www.boatrace.jp/*',
    'output': 'json'
}
```

**メリット**:
- 過去データが一括取得可能な場合あり

**デメリット**:
- 最新データは取得不可
- 保存されていないページあり

**判定**: 🟡 過去データには有効

---

## 代替案6: スクレイピング最適化（現在進行中）⭐

**現在の改善**:
- ✅ HTTPセッション最適化: 24時間 → 22.4時間（1.6時間削減）
- 🔄 selectolax移行: 推定12-16時間削減
- 🔄 並列リクエスト: 推定8-12時間削減

**最終目標**:
- 24時間 → **3-5時間**（85%削減）

**判定**: ⭐ 最も現実的

---

## 推奨アクション

### 即座に実行: データソース調査 🔍

1. **BOATRACE公式データ販売を確認**
```
https://www.boatrace.jp/
→ データ提供サービスの有無確認
```

2. **オッズパーク競艇API調査**
```
https://www.oddspark.com/
→ API提供状況確認
```

3. **Kaggleデータセット検索**
```
https://www.kaggle.com/datasets
→ "boatrace" "競艇" で検索
```

### 並行実行: スクレイピング最適化継続 ⚡

selectolax移行を進める（次のステップ）

---

## WebSearch実行

データソースを検索します。
