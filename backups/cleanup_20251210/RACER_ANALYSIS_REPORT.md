# 選手データ包括分析レポート

**作成日**: 2025-11-13 23:15
**作成者**: Claude Code
**分析期間**: 2024年1月以降
**分析対象**: 1,671名の選手

---

## 🎯 分析の目的

1. **選手の基本統計情報の集計**
2. **パフォーマンス指標の計算**
3. **強み・弱みの特定**
4. **選手詳細ページ用のデータ生成**
5. **予測モデル改善のための特徴量候補の特定**

---

## 📊 選手の基本統計

### 分析対象

- **総選手数**: 1,671名
- **分析期間**: 2024年1月〜現在
- **データソース**: entriesテーブル + resultsテーブル

### 級別の分布

| 級別 | 人数 | 割合 |
|:---:|---:|---:|
| **A1** | 330名 | 19.75% |
| **A2** | 332名 | 19.87% |
| **B1** | 846名 | 50.63% |
| **B2** | 163名 | 9.75% |

**洞察**:
- B1級が全体の半数を占める
- A級（A1+A2）は全体の約40%
- B2級は約10%（最下層）

### 年齢の統計

| 統計量 | 値 |
|:---|---:|
| 平均 | 38.9歳 |
| 中央値 | 39歳 |
| 最小 | 17歳 |
| 最大 | 77歳 |

**洞察**:
- 平均年齢は約39歳（中堅が中心）
- 最年少17歳、最年長77歳（幅広い年齢層）
- ベテラン選手も現役で活躍

### 勝率の統計（級別ごと）

| 級別 | 平均勝率 | 中央値 |
|:---:|---:|---:|
| **A1** | 6.69% | 6.71% |
| **A2** | 5.77% | 5.79% |
| **B1** | 4.51% | 4.53% |
| **B2** | 2.63% | 2.28% |

**洞察**:
- A1級とB2級で約2.5倍の差
- 級別が明確に実力を反映
- A1級でも勝率は7%程度（1着は難しい）

---

## 🏆 パフォーマンス指標

### 実勝率の統計（2024年）

| 統計量 | 値 |
|:---|---:|
| **平均** | 15.67% |
| **中央値** | 15.00% |
| **最大** | 47.44% |

**注**: 実勝率は2024年の実際の成績から計算

**洞察**:
- 平均的な選手は6〜7レースに1回勝つ
- トップ選手は2レースに1回勝つ（47.44%）
- 選手間の実力差は非常に大きい

### トップ選手（実勝率）

| 順位 | 選手番号 | 選手名 | 級別 | 出走数 | 実勝率 |
|:---:|:---:|:---|:---:|---:|---:|
| 1 | 3876 | 辻栄蔵 | A2 | 78 | **47.44%** |
| 2 | 4571 | 峰竜太 | A1 | 81 | 45.68% |
| 3 | 3024 | 石野貴之 | A1 | 123 | 42.28% |
| 4 | 4418 | 馬場貴也 | A1 | 107 | 41.12% |
| 5 | 4983 | 三浦永理 | A1 | 122 | 40.16% |
| ... | ... | ... | ... | ... | ... |

**洞察**:
- トップ選手は40%以上の勝率
- A2級でもトップクラスの選手は存在
- 実力と級別は必ずしも一致しない

### トップ選手（1号艇勝率）

| 順位 | 選手番号 | 選手名 | 級別 | 1号出走 | 1号勝率 |
|:---:|:---:|:---|:---:|---:|---:|
| 1 | 4537 | 濱野谷憲吾 | A1 | 22 | **95.45%** |
| 2 | 4959 | 椎名豊 | A1 | 29 | 93.10% |
| 3 | 4826 | 茅原悠紀 | A1 | 35 | 91.43% |
| 4 | 4851 | 前本泰和 | A1 | 23 | 91.30% |
| 5 | 4239 | 池田浩二 | A1 | 20 | 90.00% |
| ... | ... | ... | ... | ... | ... |

**洞察**:
- 1号艇からなら90%以上勝てる選手も存在
- 1号艇の有利さは選手の実力でさらに強化される
- トップクラスは1号艇で「ほぼ確実」に勝つ

---

## 💪 選手の強み・弱みの分類

### 1号艇勝率による分類

| 分類 | 1号艇勝率 | 人数 | 割合 |
|:---|:---:|---:|---:|
| **非常に強い** | 70%以上 | 321名 | 19.2% |
| **強い** | 50〜70% | 430名 | 25.7% |
| **普通** | 30〜50% | 532名 | 31.8% |
| **弱い** | 30%未満 | 218名 | 13.0% |

**洞察**:
- 約20%の選手は1号艇で70%以上勝つ
- 約45%の選手は1号艇で50%以上勝つ
- 1号艇での実力差が予測に重要

### スタート力の評価

| 評価 | 平均ST | 人数 | 割合 |
|:---|:---:|---:|---:|
| **優秀** | 0.13秒以下 | 610名 | 36.5% |
| **良好** | 0.13〜0.16秒 | 789名 | 47.2% |
| **普通** | 0.16〜0.20秒 | 118名 | 7.1% |
| **要改善** | 0.20秒以上 | 108名 | 6.5% |

**洞察**:
- 約84%の選手がST 0.16秒以内
- スタート力は勝率に直結
- ST 0.13秒以下が優秀（トップクラス）

### 信頼性（フライング・出遅れリスク）

| 評価 | F/L回数 | 人数 | 割合 |
|:---|:---:|---:|---:|
| **高信頼** | 0回 | 1,133名 | 67.8% |
| **中信頼** | 1〜2回 | 538名 | 32.2% |
| **低信頼** | 3回以上 | 0名 | 0.0% |

**洞察**:
- 約68%の選手はF/Lなし（高信頼）
- F/Lが多い選手は予測リスクが高い
- 信頼性は予測モデルの重要な特徴量

---

## 📁 生成データ

### 1. racer_profiles.json

**目的**: 選手詳細ページ用の包括的プロファイル

**構造**:
```json
{
  "選手番号": {
    "racer_number": "選手番号",
    "racer_name": "選手名",
    "racer_rank": "級別",
    "racer_home": "出身地",
    "racer_age": 年齢,
    "racer_weight": 体重,
    "statistics": {
      "win_rate": 勝率,
      "second_rate": 2連対率,
      "third_rate": 3連対率,
      "total_races": 出走数,
      "wins": 勝利数,
      "actual_win_rate": 実勝率,
      "actual_place_rate": 実連対率,
      "actual_show_rate": 実3連対率,
      "avg_rank": 平均着順
    },
    "start_performance": {
      "avg_st": 平均ST,
      "f_count": フライング回数,
      "l_count": 出遅れ回数,
      "start_quality": "スタート力評価",
      "reliability": "信頼性評価"
    },
    "pit1_performance": {
      "pit1_count": 1号艇出走数,
      "pit1_wins": 1号艇勝利数,
      "pit1_win_rate": 1号艇勝率,
      "pit1_strength": "1号艇強度評価"
    }
  }
}
```

**データ件数**: 1,671名分

**活用方法**:
- 選手詳細ページでの表示
- 選手検索機能
- 選手比較機能
- レース予想時の参考情報

### 2. racer_analysis_summary.csv

**目的**: 選手統計のサマリー（Excel等で分析可能）

**カラム（23個）**:
1. racer_number - 選手番号
2. racer_name - 選手名
3. racer_rank - 級別
4. racer_home - 出身地
5. racer_age - 年齢
6. win_rate - 勝率
7. second_rate - 2連対率
8. third_rate - 3連対率
9. total_races - 出走数
10. wins - 勝利数
11. actual_win_rate - 実勝率
12. actual_place_rate - 実連対率
13. actual_show_rate - 実3連対率
14. avg_rank - 平均着順
15. avg_st - 平均ST
16. f_count - フライング回数
17. l_count - 出遅れ回数
18. pit1_count - 1号艇出走数
19. pit1_wins - 1号艇勝利数
20. pit1_win_rate - 1号艇勝率
21. pit1_strength - 1号艇強度評価
22. start_quality - スタート力評価
23. reliability - 信頼性評価

**データ件数**: 1,671件

**活用方法**:
- データ分析
- グラフ作成
- 統計的検証
- モデル学習用データソース

---

## 🚀 予測モデル改善への活用

### 追加すべき特徴量（優先順）

#### 優先度1: フライング・出遅れ情報 ⭐⭐⭐⭐⭐

```python
# 既に計算済み
df['f_count'] = ...  # フライング回数
df['l_count'] = ...  # 出遅れ回数
df['fl_total'] = df['f_count'] + df['l_count']  # 合計
df['is_reliable'] = (df['fl_total'] == 0).astype(int)  # 高信頼フラグ
```

**期待効果**: +0.5〜1.0% AUC

#### 優先度2: 1号艇勝率 ⭐⭐⭐⭐⭐

```python
# 既に計算済み
df['pit1_win_rate'] = ...  # 1号艇勝率
df['is_pit1_strong'] = (df['pit1_win_rate'] > 70).astype(int)  # 強い選手フラグ
```

**期待効果**: +0.3〜0.7% AUC

#### 優先度3: スタート力 ⭐⭐⭐⭐☆

```python
# 既に計算済み
df['avg_st'] = ...  # 平均ST
df['start_rank'] = pd.qcut(df['avg_st'], q=4, labels=[4,3,2,1])  # スタート順位
```

**期待効果**: +0.2〜0.5% AUC

#### 優先度4: 実勝率（最近の調子） ⭐⭐⭐⭐☆

```python
# 既に計算済み
df['actual_win_rate'] = ...  # 実勝率（2024年）
df['form_gap'] = df['actual_win_rate'] - df['win_rate']  # 調子の変化
```

**期待効果**: +0.3〜0.6% AUC

---

## 📈 選手ページでの活用例

### 選手詳細ページのUI構成案

#### 1. 基本情報セクション

```
選手名: ○○ ○○
選手番号: 1234
級別: A1
出身地: 東京
年齢: 35歳
体重: 52.0kg
```

#### 2. 成績サマリー

```
【通算成績】
勝率: 6.5%
2連対率: 45.0%
3連対率: 65.0%

【2024年成績】
出走数: 120レース
勝利数: 18勝
実勝率: 15.0%
平均着順: 3.2着
```

#### 3. スタート力

```
【スタート】
平均ST: 0.15秒 ⭐ 優秀
フライング: 0回
出遅れ: 0回
信頼性: 高信頼 ✅
```

#### 4. 1号艇成績

```
【1号艇成績】
1号艇出走: 30回
1号艇勝率: 80.0% ⭐ 非常に強い
1号艇勝利数: 24勝
```

#### 5. 強み・弱み

```
【強み】
✅ 1号艇で非常に強い（80%以上）
✅ スタート力が優秀（ST 0.15秒）
✅ 信頼性が高い（F/Lなし）

【注意点】
⚠️ アウトコースからは苦戦（3〜6号艇勝率15%）
```

---

## 🎯 次のステップ

### 即実施推奨

**実験#009: 選手特徴量拡張版**

```python
# 追加する特徴量
1. f_count, l_count (フライング・出遅れ)
2. avg_st (平均ST)
3. pit1_win_rate (1号艇勝率)
4. actual_win_rate (実勝率)
5. form_gap (調子の変化)

期待効果:
- AUC: 0.8463 → 0.8613 (+1.5%)
- 的中率（0.8+）: 67.76% → 70%以上
```

### 選手ページの実装

1. **racer_profiles.jsonを活用**
   - 選手詳細ページのバックエンドAPI
   - 選手検索機能
   - 選手比較機能

2. **UIコンポーネントの作成**
   - 基本情報カード
   - 成績グラフ
   - 強み・弱み表示
   - レーダーチャート

3. **リアルタイム更新**
   - 毎日のレース結果を反映
   - 最新の成績を自動計算

---

## 📊 統計的洞察

### 重要な発見

1. **1号艇勝率の重要性**
   - トップ選手は1号艇で90%以上勝つ
   - 予測モデルに必須の特徴量

2. **スタート力の影響**
   - ST 0.13秒以下が優秀
   - 84%の選手がST 0.16秒以内

3. **級別と実力**
   - A1級とB2級で2.5倍の勝率差
   - ただし級別だけでは不十分
   - 個別の選手データが重要

4. **信頼性**
   - 68%の選手はF/Lなし
   - F/Lは予測リスクを高める

---

## 🏁 まとめ

### 達成したこと

✅ 1,671名の選手データを包括的に分析
✅ 選手プロファイルJSON生成（選手ページ用）
✅ 選手統計サマリーCSV生成（分析用）
✅ 強み・弱みの分類
✅ トップ選手の特定
✅ 予測モデル改善の方向性を明確化

### 生成データ

- **data/racer_profiles.json** - 1,671名分の詳細プロファイル
- **data/racer_analysis_summary.csv** - 統計サマリー（23カラム）

### 次の活用

1. **予測モデル改善** - 選手特徴量を追加（実験#009）
2. **選手詳細ページ** - プロファイルJSONを活用
3. **データ分析** - サマリーCSVで深掘り分析

---

**作成日**: 2025-11-13 23:15
**分析スクリプト**: analyze_racer_comprehensive.py
**次回更新**: 実験#009（選手特徴量拡張版）完了後
