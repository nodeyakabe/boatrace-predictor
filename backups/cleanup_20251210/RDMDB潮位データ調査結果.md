# NEAR-GOOS RDMDB 潮位データ調査結果

## 調査日時
2025-11-01

## データソース
- **名称**: NEAR-GOOS 地域遅延モードデータベース (RDMDB)
- **運営**: 海洋情報部 (JODC - Japan Oceanographic Data Center)
- **URL**: https://near-goos1.jodc.go.jp/vpage/index.html
- **ゲストアクセス**: `guest@onetime` (登録不要)

## データ期間
- **2022年12月まで**: 30秒値 (フォーマット: .30s_tidest)
- **2023年1月以降**: 1分値 (フォーマット: .01m_tidest)
- **利用可能年**: 1985年～2025年

## 潮位観測地点リスト

RDMDBで利用可能な潮位観測地点（全29地点）:

```
粟島、浦河、横須賀、横浜、釜石、吉岡、厳原、呉、広島、佐世保、
三宅島、室蘭、芝浦、神津島、西之表、千葉、大泊、大分、大湊、中之島、
徳山、南伊豆、博多、八丈島、舞鶴、名瀬、紋別、門司、竜飛
```

## 競艇場と観測地点のマッピング

### 現状の気象庁マッピング（参考）

| 会場コード | 会場名 | 気象庁観測地点 | 備考 |
|-----------|--------|--------------|------|
| 15 | 児島 | 宇野 (UN) | 気象庁のみ |
| 16 | 鳴門 | 小松島 (KM) | 気象庁のみ |
| 17 | 丸亀 | 高松 (TM) | 気象庁のみ |
| 18 | 宮島 | 広島 (HS) | **RDMDB利用可能** |
| 20 | 若松 | 博多 (HK) | **RDMDB利用可能** |
| 22 | 福岡 | 博多 (HK) | **RDMDB利用可能** |
| 24 | 大村 | 長崎 (NG) | 長崎なし |

### RDMDB観測地点マッピング（案）

| 会場コード | 会場名 | RDMDB地点 | データ種別ID | 距離/備考 |
|-----------|--------|-----------|------------|----------|
| 15 | 児島 | **広島** | `30s_Hiroshima_JP` | 約60km（瀬戸内海）|
| 16 | 鳴門 | **徳山** | `30s_Tokuyama_JP` | 約120km（瀬戸内海）|
| 17 | 丸亀 | **広島** | `30s_Hiroshima_JP` | 約100km（瀬戸内海）|
| 18 | 宮島 | **広島** | `30s_Hiroshima_JP` | ✅ 約20km（最適） |
| 20 | 若松 | **博多** | `30s_Hakata_JP` | ✅ 約10km（最適） |
| 22 | 福岡 | **博多** | `30s_Hakata_JP` | ✅ 約15km（最適） |
| 24 | 大村 | **佐世保** | `30s_Sasebo_JP` | 約30km（大村湾近隣）|

**代替地点の検討**:
- **児島・丸亀**: 呉(Kure)も利用可能（距離は同程度）
- **若松・福岡**: 門司(Moji)も利用可能（門司は若松のすぐ隣）
- **鳴門**: 広島が最も近い瀬戸内海の観測地点

## データ取得手順

### 1. 年月指定ダウンロード

**URL**: `https://near-goos1.jodc.go.jp/cgi-bin/vpage/download_yearmonth.cgi`

**パラメータ**:
- `year`: 年（例: 2022, 2023, 2024, 2025）
- `month`: 月（1～12）
- `data_kind_30s_<Station>_JP`: チェックボックス（例: `data_kind_30s_Hakata_JP`）

**手順**:
1. トップページ → search.html
2. 年月選択フォームで年・月を指定
3. 必要な観測地点にチェック
4. ダウンロード実行

### 2. ダウンロードされるファイル形式

- **2022年12月まで**: `<Station>.30s_tidest.<YYYYMM>`
- **2023年1月以降**: `<Station>.01m_tidest.<YYYYMM>`

例:
- `Hakata.30s_tidest.202211` (2022年11月博多の30秒値データ)
- `Hakata.01m_tidest.202301` (2023年1月博多の1分値データ)

## データフォーマット

### ヘッダー情報
- データの基準面: 観測基準面 (Observed Datum Level)
- 座標情報
- フォーマットバージョン

### データ行フォーマット（推定）
```
YYYY-MM-DD HH:MM:SS  <tide_level_cm>
```

## 実装方針

### フェーズ1: データ取得スクリプト実装
1. Selenium使用して年月指定でファイルダウンロード
2. 2022-11～2025-10の全月データを取得（37ヶ月分）
3. 対象観測地点: 博多、広島、佐世保、徳山（4地点）

### フェーズ2: データパーサー実装
1. .30s_tidest および .01m_tidest フォーマットの解析
2. 潮位データの抽出（日時、潮位レベル）
3. DBへの保存ロジック

### フェーズ3: DB統合
1. レースデータとの紐付け
2. 展示タイムと潮位の相関分析準備

## 次のステップ
1. ✅ RDMDBアクセス手順の確認
2. ⏳ 実際のファイルダウンロードテスト
3. ⏳ ファイルフォーマットの解析
4. ⏳ パーサー実装
5. ⏳ 本格的なデータ収集

## 備考
- **データ品質**: JODCの公式データであり信頼性高い
- **データ量**: 1分値でも1ヶ月あたり約43,200レコード（30日×24時間×60分）
- **ストレージ**: 1地点1ヶ月あたり数MB程度（テキスト形式）
- **瀬戸内海の潮位**: 児島・鳴門・丸亀は全て瀬戸内海内のため、広島の潮位データで代用可能
