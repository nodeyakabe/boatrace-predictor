# 買い目戦略 完全検証レポート

**作成日**: 2025年12月7日
**検証期間**: 2025年1月〜11月（11ヶ月間）

---

## 目次
1. [検証の経緯](#1-検証の経緯)
2. [Phase 1: 初期戦略の検討](#2-phase-1-初期戦略の検討)
3. [Phase 2: 予測精度改善](#3-phase-2-予測精度改善)
4. [Phase 3: オッズフィルター導入](#4-phase-3-オッズフィルター導入)
5. [Phase 4: 11ヶ月バックテストと戦略最適化](#5-phase-4-11ヶ月バックテストと戦略最適化)
6. [Phase 5: MODERATE戦略の確立](#6-phase-5-moderate戦略の確立)
7. [Phase 6: 2連単の追加検証](#7-phase-6-2連単の追加検証)
8. [最終結論と推奨戦略](#8-最終結論と推奨戦略)

---

## 1. 検証の経緯

### 1.1 課題認識
競艇の控除率は約25%。理論上の期待値は0.75（回収率75%）。
これを超えるには「オッズの歪み」を見つける必要がある。

### 1.2 初期状態
| 指標 | 値 |
|------|-----|
| フォーメーション4点買い | 回収率75-76% |
| 6点買い | 回収率76% |
| 10点買い | 回収率76% |

→ 買い点数を増やしても回収率は改善しない

---

## 2. Phase 1: 初期戦略の検討（2024年11月）

### 2.1 検討した戦略

| 戦略 | 対象レース | 的中率 | 回収率 | 結果 |
|------|-----------|--------|--------|------|
| 3連単4点固定 | 10,945 | 24.5% | 75.5% | ベース |
| 3連単6点固定 | 10,945 | 30.2% | 76.5% | 不採用 |
| 信頼度フィルター (>=70) | 3,462 | 32.5% | 77.1% | 不採用 |
| 期待値ベース (>=3%) | - | - | 95.4% | 継続検討 |

### 2.2 発見
- 買い点数増加は的中率は上がるが回収率は変わらない
- 信頼度フィルターは対象レースが少なすぎる
- **期待値ベース（確率閾値）で回収率95%に改善**

### 2.3 採用した基本設定
```python
DEFAULT_BETTING_CONFIG = {
    "trifecta_default_points": 4,  # 3連単4点
    "unit_bet": 100,               # 1点100円
}
```

---

## 3. Phase 2: 予測精度改善（2024年11月）

### 3.1 新方式（Phase 1-4モジュール）の導入

| 指標 | 従来方式 | 新方式 | 改善幅 |
|------|----------|--------|--------|
| 1着的中率 | 52.3% | 56.8% | +4.5pt |
| 1-2着的中率 | 14.4% | 20.6% | +6.2pt |
| 3連単的中率 | 4.6% | 8.1% | +3.5pt |
| 2着的中率 | 25.5% | 39.0% | +13.5pt |
| 3着的中率 | 20.5% | 27.5% | +7.0pt |

### 3.2 追加した要素
1. **平均STスコア**: スタートタイミングと勝率の相関
2. **会場特性反映**: 高イン会場/低イン会場で配点調整
3. **拡張スコアリング**: 展示タイム、チルト角度、直近成績等

### 3.3 スコアリング配点
```python
SCORING_WEIGHTS = {
    "course": 35,   # コース有利度
    "racer": 35,    # 選手能力
    "motor": 20,    # モーター性能
    "rank": 10,     # 級別
}
```

---

## 4. Phase 3: オッズフィルター導入（2024年12月）

### 4.1 オッズデータの重要性発見

| 月 | オッズデータ | 回収率 |
|----|-------------|--------|
| 2025年1月 | なし | 86.7% |
| 2025年10月 | なし | 82.0% |
| 2025年11月 | **あり** | **155.9%** |

→ **オッズフィルターが収益の鍵**

### 4.2 信頼度別の最適条件（11月データ）

| 信頼度 | 方式 | 条件 | 的中率 | 回収率 |
|--------|------|------|--------|--------|
| B | 新方式 | 全レース | 12.6% | 122.4% |
| C | 従来方式 | オッズ20-50倍 | 4.9% | 153.2% |
| D | 新方式 | 1-2予測+オッズ20倍以上 | 11.4% | 376.9% |

### 4.3 1点買いの優位性
| 買い方 | 的中率 | 回収率 | 評価 |
|--------|--------|--------|------|
| 1点買い | 低 | 高 | **推奨** |
| 5点買い | 高 | 低 | 非推奨 |

**理由**: 追加4点で拾えるのは低オッズ（5-15倍）が多く、投資効率悪化

---

## 5. Phase 4: 11ヶ月バックテストと戦略最適化

### 5.1 初期戦略（11月単月の結果を適用）

| 信頼度 | 条件 | 11月ROI |
|--------|------|---------|
| B | 新方式・全レース | 122.4% |
| C | 従来・20-50倍 | 153.2% |
| D | 新方式・1-2予測・20倍+ | 376.9% |

### 5.2 11ヶ月バックテスト結果

#### 信頼度B
| 条件 | 件数 | 的中率 | ROI | 黒字月 |
|------|------|--------|-----|--------|
| B × 新方式 × 全レース | - | - | 85-95% | 2-3/11 |
| B × A1 × 全レース | 918 | 20.6% | 72.0% | 3/11 |
| B × A2 × 全レース | 416 | 23.6% | 103.8% | 3/10 |

→ **信頼度Bは不安定。除外決定**

#### 信頼度C
| 条件 | 件数 | 的中率 | ROI | 黒字月 |
|------|------|--------|-----|--------|
| C × 従来 × 20-50倍 × A1 | 451 | 4.2% | 122.8% | 5-6/11 |
| C × 従来 × 30-60倍 × A1 | 363 | 3.3% | 127.2% | **7/11** |
| C × 従来 × A2 | - | - | 71.2% | - |

→ **C × A1 × 高オッズが安定**

#### 信頼度D
| 条件 | 件数 | 的中率 | ROI | 黒字月 |
|------|------|--------|-----|--------|
| D × 新方式 × 25-50倍 × A1 | 75 | 8.0% | **251.5%** | 5/11 |
| D × 従来 × 20-50倍 × A1 | 173 | 4.0% | 215.7% | 5/11 |
| D × A2 | - | - | 82.9% | - |

→ **D × A1 × 高オッズが高収益**

### 5.3 級別の影響

| 1コース級別 | 傾向 | 採用 |
|------------|------|------|
| A1 | 高回収率、安定 | ◎ 採用 |
| A2 | 赤字または微黒字 | × 除外 |
| B1, B2 | 大幅赤字 | × 除外 |

---

## 6. Phase 5: MODERATE戦略の確立

### 6.1 戦略の絞り込み

11ヶ月バックテストで「黒字月7ヶ月以上」を達成できる条件を厳選。

### 6.2 MODERATE戦略（最終版）

#### 3連単購入条件

| 信頼度 | 方式 | オッズ範囲 | 1C級別 | 賭け金 | ROI | サンプル |
|--------|------|-----------|--------|--------|-----|----------|
| C | 従来 | 30-60倍 | A1 | 500円 | 127.2% | 363件 |
| C | 従来 | 20-40倍 | A1 | 400円 | 122.8% | 451件 |
| D | 新方式 | 25-50倍 | A1 | 300円 | 251.5% | 75件 |
| D | 従来 | 20-50倍 | A1 | 300円 | 215.7% | 173件 |

#### 除外条件
- 信頼度A, B: サンプル不足・月間安定性低
- 1コースB1, B2級: 回収率低
- A2級: 赤字傾向

### 6.3 MODERATE戦略の成績

| 指標 | 値 |
|------|-----|
| 年間収支 | **+92,020円** |
| ROI | **122.9%** |
| 黒字月 | **7/11月 (63.6%)** |
| 月間的中数 | 2.9件 |
| 年間投資 | 401,500円 |
| 年間回収 | 493,520円 |

### 6.4 月別成績

| 月 | 件数 | 的中 | 投資 | 回収 | 収支 | ROI |
|----|------|------|------|------|------|-----|
| 2025-01 | 61 | 4 | 23,900 | 98,900 | +75,000 | 413.8% ✓ |
| 2025-02 | 58 | 1 | 23,800 | 15,400 | -8,400 | 64.7% |
| 2025-03 | 61 | 3 | 24,500 | 24,830 | +330 | 101.3% ✓ |
| 2025-04 | 95 | 3 | 37,700 | 55,150 | +17,450 | 146.3% ✓ |
| 2025-05 | 96 | 2 | 39,500 | 26,140 | -13,360 | 66.2% |
| 2025-06 | 89 | 3 | 37,100 | 29,360 | -7,740 | 79.1% |
| 2025-07 | 90 | 3 | 40,100 | 40,510 | +410 | 101.0% ✓ |
| 2025-08 | 96 | 4 | 42,200 | 76,870 | +34,670 | 182.2% ✓ |
| 2025-09 | 112 | 2 | 49,900 | 21,700 | -28,200 | 43.5% |
| 2025-10 | 128 | 4 | 58,600 | 62,000 | +3,400 | 105.8% ✓ |
| 2025-11 | 54 | 3 | 24,200 | 42,660 | +18,460 | 176.3% ✓ |

---

## 7. Phase 6: 2連単の追加検証

### 7.1 検証の動機
- 月間的中数2.9件は少なく、「的中実感」がない
- 信頼度B（鉄板レース）を活用できていない
- 2連単で補完できないか？

### 7.2 2連単 信頼度別成績（級別フィルターなし）

| 信頼度 | 件数 | 的中率 | ROI | 年間収支 | 黒字月 |
|--------|------|--------|-----|----------|--------|
| A | 3 | 66.7% | 133.3% | +100円 | 1/1 |
| B | 1,407 | 21.3% | 83.7% | -22,900円 | 3/11 |
| C | 9,747 | 15.4% | 80.4% | -190,600円 | 1/11 |
| D | 4,929 | 10.9% | 83.3% | -82,160円 | 3/11 |

→ **級別フィルターなしでは全信頼度で赤字**

### 7.3 2連単 信頼度×級別成績

#### 黒字になる条件

| 条件 | 件数 | 的中率 | ROI | 年間収支 | 黒字月 | 評価 |
|------|------|--------|-----|----------|--------|------|
| **D × A1** | 907 | 14.6% | **106.7%** | **+12,240円** | 5/11 | ◎ 採用 |
| B × A2 | 416 | 23.6% | 103.8% | +3,200円 | 3/10 | △ 安定性低 |
| B × B1 | 69 | 18.8% | 122.9% | +3,160円 | 4/7 | × サンプル不足 |

#### 赤字の条件

| 条件 | 件数 | 的中率 | ROI | 年間収支 |
|------|------|--------|-----|----------|
| D × A1/A2 | 1,999 | 13.4% | 97.6% | -9,660円 |
| C × A1 | 3,308 | 17.4% | 77.1% | -151,820円 |
| C × A1/A2 | 6,595 | 16.8% | 75.9% | -317,380円 |
| B × A1 | 918 | 20.6% | 72.0% | -51,360円 |

### 7.4 2連単の結論
- **D × A1のみが黒字**（ROI 106.7%）
- 級別フィルター（A1限定）が必須
- 信頼度B・Cは的中率は高いが払戻が低く赤字

### 7.5 複合戦略（3連単 + 2連単）

| 戦略 | 年間収支 | ROI | 黒字月 | 月間的中 |
|------|----------|-----|--------|---------|
| 3連単のみ | +92,020円 | 122.9% | 7/11 (63.6%) | 2.9件 |
| 2連単のみ(D×A1) | +12,240円 | 106.7% | 5/11 (45.5%) | 12.0件 |
| **複合** | **+104,260円** | 117.9% | 6/11 (54.5%) | **14.9件** |

---

## 8. 最終結論と推奨戦略

### 8.1 戦略比較サマリー

| 戦略 | 年間収支 | ROI | 黒字月 | 月間的中 | 推奨度 |
|------|----------|-----|--------|---------|--------|
| 3連単MODERATE | +92,020円 | 122.9% | 63.6% | 2.9件 | ◎ 収益重視 |
| 複合戦略 | +104,260円 | 117.9% | 54.5% | 14.9件 | ○ バランス |
| 2連単のみ | +12,240円 | 106.7% | 45.5% | 12.0件 | △ 安定性低 |

### 8.2 推奨戦略

#### 収益最大化を狙う場合
**3連単MODERATE戦略のみ**

| 条件 | 賭け金 | 期待ROI |
|------|--------|---------|
| C × 従来 × 30-60倍 × A1 | 500円 | 127.2% |
| C × 従来 × 20-40倍 × A1 | 400円 | 122.8% |
| D × 新方式 × 25-50倍 × A1 | 300円 | 251.5% |
| D × 従来 × 20-50倍 × A1 | 300円 | 215.7% |

#### 的中頻度を重視する場合
**複合戦略（3連単 + 2連単）**

上記に加えて：
| 条件 | 賭け金 | 期待ROI |
|------|--------|---------|
| D × A1 × 2連単 | 200円 | 106.7% |

### 8.3 除外すべき条件

| 除外条件 | 理由 |
|---------|------|
| 信頼度A | サンプル極少 |
| 信頼度B | 月間安定性低（3/11月しか黒字にならない） |
| 1コースA2級 | 赤字傾向（ROI 70-90%） |
| 1コースB1/B2級 | 大幅赤字 |
| 低オッズ（20倍未満） | 期待値マイナス |

### 8.4 重要な発見

1. **オッズフィルターが必須**: オッズデータなしでは回収率80%台
2. **1コースA1級限定**: 他の級別では赤字
3. **1点買いが最適**: 追加点は低オッズを拾い効率悪化
4. **信頼度C/Dのみ採用**: A/Bは安定性に欠ける
5. **2連単は補助的**: 単独では収益性・安定性ともに低い

### 8.5 今後の改善案

#### 短期
- [x] 2連単（D×A1）を補助戦略として実装済み

#### 中期
- [ ] 穴予測専用モデルの構築
  - 荒れ判定モデル（1コースが負ける条件を学習）
  - 期待効果: 月間的中数 2-3件 → 5-8件

#### 長期
- [ ] B×A2の2連単追加検討（安定性向上後）
- [ ] 2連複の検証
- [ ] 時間帯・場別の条件最適化

---

## 付録: 実装ファイル

| ファイル | 用途 |
|----------|------|
| `src/betting/bet_target_evaluator.py` | 購入対象判定ロジック |
| `scripts/backtest_strategy.py` | 戦略バックテスト |
| `scripts/backtest_multi_month.py` | 11ヶ月バックテスト |
| `scripts/backtest_combined_strategy.py` | 複合戦略検証 |
| `scripts/backtest_exacta_optimized.py` | 2連単最適化 |
| `docs/hole_prediction_model_design.md` | 穴予測モデル設計書 |

---

*最終更新: 2025年12月7日*
