# ãƒœãƒ¼ãƒˆãƒ¬ãƒ¼ã‚¹äºˆæ¸¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - ç¾çŠ¶ã¨æ¬¡ã‚¹ãƒ†ãƒƒãƒ—

**æœ€çµ‚æ›´æ–°**: 2025-11-14
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœŸé–“**: å®Ÿé¨“#001 ã€œ #022
**ç¾åœ¨ã®çŠ¶æ…‹**: Phase 3 å®Œäº†ã€å®Ÿæˆ¦é‹ç”¨æº–å‚™æ®µéš

---

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“åƒ

### é”æˆã—ãŸæˆæœ

| æŒ‡æ¨™ | å€¤ | å‚™è€ƒ |
|------|-----|------|
| **æœ€é«˜AUC** | 0.8496 | å®Ÿé¨“#012ï¼ˆOptunaæœ€é©åŒ–ï¼‰ |
| **çš„ä¸­ç‡(0.8+)** | 87.72% | é«˜ç¢ºç‡å¸¯ã§ã®çš„ä¸­ç‡ |
| **æœŸå¾…ROI** | 40-47% | ã‚ªãƒƒã‚ºæœŸå¾…å€¤æˆ¦ç•¥ï¼ˆå®Ÿé¨“#019ï¼‰ |
| **è¤‡å‹çš„ä¸­ç‡(0.8+)** | 92.22% | å®Ÿé¨“#018 |
| **ä¼šå ´åˆ¥æœ€é«˜AUC** | 0.9341 | ä¼šå ´07å°‚ç”¨ãƒ¢ãƒ‡ãƒ« |
| **å®Ÿé¨“å›æ•°** | 22å› | #001ã€œ#022 |
| **å­¦ç¿’ãƒ‡ãƒ¼ã‚¿** | 57,343ä»¶ | 2023-06ã€œ2024-05ï¼ˆ12ãƒ¶æœˆï¼‰ |
| **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿** | 4,843ä»¶ | 2024-06ã€œ2024-06ï¼ˆ1ãƒ¶æœˆï¼‰ |

---

## ğŸ¯ å®Œäº†ã—ãŸ6é …ç›®ã®å®Ÿè£…

### âœ… 1. è¤‡å‹ãƒ»3é€£å˜ã®äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«é–‹ç™º (å®Ÿé¨“#018)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `train_place_and_trifecta_models.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: âœ… å®Œäº†

**æˆæœ**:
- å˜å‹äºˆæ¸¬: AUC 0.8538
- **è¤‡å‹äºˆæ¸¬**: AUC 0.7858ã€çš„ä¸­ç‡(0.8+) **92.22%**
- 3é€£å˜äºˆæ¸¬: çš„ä¸­ç‡ 9.31%

**ç‰¹å¾´é‡**: ãƒ¬ãƒ¼ã‚¹å†…ç›¸å¯¾å¼·åº¦
- `win_rate_rank_in_race`: å‹ç‡ã®é †ä½
- `win_rate_diff_from_top`: ãƒˆãƒƒãƒ—ã¨ã®å·®åˆ†
- `motor_diff_from_top`: ãƒ¢ãƒ¼ã‚¿ãƒ¼æ€§èƒ½å·®

**å®Ÿç”¨æ€§**:
- è¤‡å‹ã®é«˜çš„ä¸­ç‡ï¼ˆ92.22%ï¼‰ã¯å®Ÿæˆ¦ã§éå¸¸ã«æœ‰åŠ¹
- ä½ã‚ªãƒƒã‚ºã§ã‚‚å®‰å®šã—ãŸåç›ŠãŒæœŸå¾…ã§ãã‚‹

### âœ… 2. ä¼šå ´åˆ¥ãƒ¢ãƒ‡ãƒ«ã®å…¨ä¼šå ´å±•é–‹ (å®Ÿé¨“#021)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `train_all_venues.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: â³ ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œä¸­ï¼ˆ39f007ï¼‰

**å†…å®¹**:
- å…¨24ä¼šå ´ã«å°‚ç”¨ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’
- ãƒ‡ãƒ¼ã‚¿é‡ä¸è¶³ï¼ˆå­¦ç¿’500ä»¶æœªæº€ã€ãƒ†ã‚¹ãƒˆ30ä»¶æœªæº€ï¼‰ã®ä¼šå ´ã¯ã‚¹ã‚­ãƒƒãƒ—
- å„ä¼šå ´ã®AUCã€çš„ä¸­ç‡ã‚’å€‹åˆ¥ã«è©•ä¾¡

**æ—¢çŸ¥ã®æˆæœ** (å®Ÿé¨“#016ã‚ˆã‚Š):
- ä¼šå ´07: AUC 0.9341ï¼ˆä¾‹å¤–çš„é«˜æ€§èƒ½ï¼‰
- ä¼šå ´08: AUC 0.8715
- Top5å¹³å‡: AUC 0.8324

**ç¢ºèªæ–¹æ³•**:
```bash
# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
cat all_venues_output.log

# ã¾ãŸã¯å®Ÿè¡ŒçŠ¶æ³ç¢ºèª
python -c "import glob; print(glob.glob('models/stage2_venue_*.json'))"
```

### âœ… 3. ã‚ªãƒƒã‚ºæƒ…å ±ã®æ´»ç”¨æ©Ÿèƒ½å®Ÿè£… (å®Ÿé¨“#019)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `odds_value_analyzer.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: âœ… å®Œäº†

**ä¸»è¦æˆæœ**:
```
å…¨ä½“ROI: 40.01%
æœŸå¾…å€¤+ã®ãƒ¬ãƒ¼ã‚¹: 2,962ä»¶ï¼ˆ61.16%ï¼‰
```

**3ã¤ã®å®Ÿè·µæˆ¦ç•¥**:

| æˆ¦ç•¥ | æ¡ä»¶ | çš„ä¸­ç‡ | ROI | ãƒ¬ãƒ¼ã‚¹æ•° |
|------|------|--------|-----|----------|
| **ä¿å®ˆçš„** | ç¢ºç‡â‰¥0.8 & EV>0 | 85.71% | 47.10% | 42/æœˆ |
| **ãƒãƒ©ãƒ³ã‚¹** | EVâ‰¥+10% | 25.02% | 45.35% | 2,350/æœˆ |
| **ç©´ç‹™ã„** | ç¢ºç‡â‰¥0.3 & EVâ‰¥+20% | 60.46% | 46.63% | 521/æœˆ |

**é‡è¦ãªæ³¨æ„**:
- âš ï¸ **ç¾åœ¨ã¯ä»®æƒ³ã‚ªãƒƒã‚ºã‚’ä½¿ç”¨**
- å®Ÿæˆ¦ã§ã¯å®Ÿéš›ã®ã‚ªãƒƒã‚ºAPIã‹ã‚‰å–å¾—ãŒå¿…é ˆ
- ã‚ªãƒƒã‚ºã¯ç· åˆ‡ç›´å‰ã¾ã§å¤‰å‹•ã™ã‚‹

### âœ… 4. ç›´è¿‘æˆç¸¾ç‰¹å¾´é‡ã®å®Ÿè£…ã¨å®Ÿè¡Œ (å®Ÿé¨“#015)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `train_with_recent_performance.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: âœ… ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œæˆï¼ˆå®Ÿè¡Œã¯è¨ˆç®—ã‚³ã‚¹ãƒˆå¤§ï¼‰

**å®Ÿè£…å†…å®¹**:
- ç›´è¿‘3æˆ¦ã€5æˆ¦ã€10æˆ¦ã®å¹³å‡é †ä½
- ç›´è¿‘ã®å‹ç‡ï¼ˆrecent_N_win_rateï¼‰
- é¸æ‰‹ã”ã¨ã®éå»ãƒ¬ãƒ¼ã‚¹å±¥æ­´ã‹ã‚‰ç®—å‡º

**ç‰¹å¾´é‡ä¾‹**:
```python
recent_3_avg_rank    # ç›´è¿‘3æˆ¦ã®å¹³å‡é †ä½
recent_3_win_rate    # ç›´è¿‘3æˆ¦ã®å‹ç‡
recent_5_avg_rank    # ç›´è¿‘5æˆ¦ã®å¹³å‡é †ä½
recent_10_avg_rank   # ç›´è¿‘10æˆ¦ã®å¹³å‡é †ä½
```

**è¨ˆç®—ã‚³ã‚¹ãƒˆã®å•é¡Œ**:
- å…¨ãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œã™ã‚‹ã¨æ•°æ™‚é–“ã‹ã‹ã‚‹
- ç¾åœ¨ã¯ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å®Ÿè£…ï¼ˆ1000ä»¶/ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼‰

**æ”¹å–„æ¡ˆ**:
```python
# äº‹å‰è¨ˆç®—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥
# ã¾ãŸã¯å¢—åˆ†æ›´æ–°æ–¹å¼ã«å¤‰æ›´
```

### âœ… 5. ç•°ãªã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã®ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ« (å®Ÿé¨“#020)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `train_multimodel_ensemble.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: âœ… å®Œäº†

**ãƒ†ã‚¹ãƒˆã—ãŸãƒ¢ãƒ‡ãƒ«**:
- XGBoost: AUC 0.8484
- LightGBM: AUC 0.8492

**ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµæœ**:
```
æœ€è‰¯ã®é‡ã¿: XGB 0.0 : LGB 1.0
â†’ LightGBMå˜ä½“ãŒæœ€è‰¯ï¼ˆAUC 0.8492ï¼‰
```

**çµè«–**:
- åŒã˜ç‰¹å¾´é‡ãƒ»åŒã˜ã‚¿ã‚¤ãƒ—ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«åŠ¹æœãŒè–„ã„
- å®Ÿé¨“#012ï¼ˆAUC 0.8496ï¼‰ã«ã¯åŠã°ãš
- CatBoostã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãªã©ç•°ãªã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã®çµ„ã¿åˆã‚ã›ã‚’æ¤œè¨ã™ã¹ã

### âœ… 6. ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®æ¤œè¨ (å®Ÿé¨“#022)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `train_deep_learning_model.py`
**å®Ÿè¡ŒçŠ¶æ…‹**: âœ… ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œæˆï¼ˆTensorFlowè¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰

**ãƒ¢ãƒ‡ãƒ«æ§‹é€ **:
```python
Input(35æ¬¡å…ƒ)
  â†“
Dense(128) + BatchNorm + Dropout(0.3)
  â†“
Dense(64) + BatchNorm + Dropout(0.3)
  â†“
Dense(32) + BatchNorm + Dropout(0.3)
  â†“
Dense(16) + BatchNorm + Dropout(0.3)
  â†“
Output(1, sigmoid)
```

**å®Ÿè¡Œæ‰‹é †**:
```bash
# TensorFlowã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install tensorflow

# ãƒ¢ãƒ‡ãƒ«å­¦ç¿’å®Ÿè¡Œ
python train_deep_learning_model.py

# å®Ÿè¡Œæ™‚é–“: ç´„10-15åˆ†ï¼ˆGPUä¸ä½¿ç”¨æ™‚ï¼‰
```

**æœŸå¾…ã•ã‚Œã‚‹æ€§èƒ½**:
- è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿ã§ã¯XGBoostãŒå„ªä½ãªã‚±ãƒ¼ã‚¹ãŒå¤šã„
- ãŸã ã—ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¬¡ç¬¬ã§ç«¶äº‰åŠ›ã‚ã‚Š
- Attentionæ©Ÿæ§‹ã‚„TabNetã‚‚æ¤œè¨ä¾¡å€¤ã‚ã‚Š

---

## ğŸ“ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«

```
models/
â”œâ”€â”€ stage2_optimized.json          # â­ ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ï¼ˆå®Ÿé¨“#012, AUC 0.8496ï¼‰
â”œâ”€â”€ stage2_venue_07.json          # ä¼šå ´07å°‚ç”¨ï¼ˆAUC 0.9341ï¼‰
â”œâ”€â”€ stage2_venue_08.json          # ä¼šå ´08å°‚ç”¨ï¼ˆAUC 0.8715ï¼‰
â”œâ”€â”€ stage2_venue_*.json           # ãã®ä»–ä¼šå ´åˆ¥ãƒ¢ãƒ‡ãƒ«ï¼ˆå®Ÿé¨“#021ã§ç”Ÿæˆä¸­ï¼‰
â””â”€â”€ deep_learning_model.h5        # DLãƒ¢ãƒ‡ãƒ«ï¼ˆå®Ÿé¨“#022å®Ÿè¡Œå¾Œï¼‰
```

### å­¦ç¿’ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```
# ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«é–¢é€£
train_stage2_optimized.py              # å®Ÿé¨“#012ï¼ˆOptunaæœ€é©åŒ–ï¼‰
train_stage2_racer_simple_8months.py   # å®Ÿé¨“#009b

# æ”¹å–„å®Ÿé¨“
train_ensemble_models.py               # å®Ÿé¨“#013ï¼ˆã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ï¼‰
train_with_recent_performance.py       # å®Ÿé¨“#015ï¼ˆç›´è¿‘æˆç¸¾ï¼‰
train_venue_specific_models.py         # å®Ÿé¨“#016ï¼ˆä¼šå ´åˆ¥Top5ï¼‰
train_with_timeseries_features.py      # å®Ÿé¨“#017ï¼ˆæ™‚ç³»åˆ—ï¼‰

# Phase 3å®Ÿè£…
train_place_and_trifecta_models.py     # âœ… å®Ÿé¨“#018ï¼ˆè¤‡å‹ãƒ»3é€£å˜ï¼‰
odds_value_analyzer.py                 # âœ… å®Ÿé¨“#019ï¼ˆã‚ªãƒƒã‚ºæœŸå¾…å€¤ï¼‰
train_multimodel_ensemble.py           # âœ… å®Ÿé¨“#020ï¼ˆXGB+LGBï¼‰
train_all_venues.py                    # â³ å®Ÿé¨“#021ï¼ˆå…¨ä¼šå ´ï¼‰
train_deep_learning_model.py           # ğŸ“ å®Ÿé¨“#022ï¼ˆDLï¼‰
```

### ãƒ¬ãƒãƒ¼ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```
FINAL_COMPREHENSIVE_REPORT.md          # â­ æœ€çµ‚ç·åˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆ60ãƒšãƒ¼ã‚¸ç›¸å½“ï¼‰
IMPROVEMENTS_COMPREHENSIVE_REPORT.md   # æ”¹å–„å®Ÿé¨“ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ#013-#017ï¼‰
PROJECT_STATUS_AND_NEXT_STEPS.md       # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

```
place_trifecta_output.log              # å®Ÿé¨“#018ã®å‡ºåŠ›
odds_output.log                        # å®Ÿé¨“#019ã®å‡ºåŠ›
ensemble_output.log                    # å®Ÿé¨“#013ã®å‡ºåŠ›
multimodel_ensemble_output.log         # å®Ÿé¨“#020ã®å‡ºåŠ›
all_venues_output.log                  # å®Ÿé¨“#021ã®å‡ºåŠ›ï¼ˆç”Ÿæˆä¸­ï¼‰
venue_models_output.log                # å®Ÿé¨“#016ã®å‡ºåŠ›
```

### UIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

```
src/ui/streamlit_app.py                # Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```

---

## ğŸš€ æ˜æ—¥ä»¥é™ã®ä½œæ¥­ãƒªã‚¹ãƒˆ

### ã€å„ªå…ˆåº¦ï¼šé«˜ã€‘å³åº§ã«å®Ÿè¡Œå¯èƒ½

#### 1. å®Ÿé¨“#021ã®çµæœç¢ºèªï¼ˆ5åˆ†ï¼‰

```bash
# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã®ç¢ºèª
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
cat all_venues_output.log | grep "AUC\|çš„ä¸­ç‡\|ä¼šå ´"

# ã¾ãŸã¯å…¨æ–‡ç¢ºèª
cat all_venues_output.log
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- å„ä¼šå ´ã®AUC
- çµ±åˆãƒ¢ãƒ‡ãƒ«(0.8496)ã‚’ä¸Šå›ã‚‹ä¼šå ´
- ã‚¹ã‚­ãƒƒãƒ—ã•ã‚ŒãŸä¼šå ´ã®ç†ç”±

#### 2. ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè¡Œï¼ˆ20åˆ†ï¼‰

```bash
# TensorFlowã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install tensorflow

# å®Ÿè¡Œ
python train_deep_learning_model.py

# æœŸå¾…: AUC 0.82-0.85ç¨‹åº¦ï¼ˆXGBoostã«ã¯åŠã°ãªã„å¯èƒ½æ€§ï¼‰
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- å®Ÿé¨“#012ï¼ˆ0.8496ï¼‰ã¨æ¯”è¼ƒ
- å­¦ç¿’æ›²ç·šï¼ˆéå­¦ç¿’ã®æœ‰ç„¡ï¼‰
- é«˜ç¢ºç‡å¸¯(0.8+)ã®çš„ä¸­ç‡

#### 3. ç›´è¿‘æˆç¸¾ç‰¹å¾´é‡ã®å…¨ãƒ‡ãƒ¼ã‚¿å®Ÿè¡Œï¼ˆ2-3æ™‚é–“ï¼‰

```bash
# ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’å¤–ã—ã¦å…¨ãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
# train_with_recent_performance.py ã®ä»¥ä¸‹ã‚’ä¿®æ­£:

# ä¿®æ­£å‰
sample_size = min(1000, len(df))
df_sample = df.sample(n=sample_size, random_state=42)

# ä¿®æ­£å¾Œ
df_sample = df  # å…¨ãƒ‡ãƒ¼ã‚¿

# å®Ÿè¡Œï¼ˆæ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ¨å¥¨ï¼‰
python train_with_recent_performance.py 2>&1 | tee recent_performance_full_output.log &
```

**æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ**:
- ç›´è¿‘ã®èª¿å­ã‚’åæ˜ ã—ãŸäºˆæ¸¬
- å¯èƒ½æ€§ã¨ã—ã¦AUC 0.85+

### ã€å„ªå…ˆåº¦ï¼šä¸­ã€‘ãƒ‡ãƒ¼ã‚¿ãƒ»ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„

#### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ›´æ–°ï¼ˆ30åˆ†ï¼‰

**ç¾åœ¨ã®æœŸé–“**:
- å­¦ç¿’: 2023-06-01 ã€œ 2024-05-31
- ãƒ†ã‚¹ãƒˆ: 2024-06-01 ã€œ 2024-06-30

**æ›´æ–°æ¡ˆ**:
```python
# ã‚ˆã‚Šæœ€è¿‘ã®ãƒ‡ãƒ¼ã‚¿ã«æ›´æ–°
å­¦ç¿’: 2024-01-01 ã€œ 2024-10-31ï¼ˆ10ãƒ¶æœˆï¼‰
ãƒ†ã‚¹ãƒˆ: 2024-11-01 ã€œ 2024-11-30ï¼ˆ1ãƒ¶æœˆï¼‰
```

**æ‰‹é †**:
```bash
# ã¾ãšãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã‹ç¢ºèª
python -c "
import sqlite3
conn = sqlite3.connect('data/boatrace.db')
df = pd.read_sql_query('SELECT MIN(race_date), MAX(race_date) FROM races', conn)
print(df)
conn.close()
"

# ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°å†å­¦ç¿’
python train_stage2_optimized.py  # æœŸé–“ã‚’ä¿®æ­£å¾Œ
```

#### 5. Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®æ”¹å–„ï¼ˆ1æ™‚é–“ï¼‰

**ç¾åœ¨ã®çŠ¶æ…‹**: åŸºæœ¬çš„ãªäºˆæ¸¬æ©Ÿèƒ½ã®ã¿

**è¿½åŠ ã™ã¹ãæ©Ÿèƒ½**:
```python
# src/ui/streamlit_app.py ã«è¿½åŠ 

# 1. ã‚ªãƒƒã‚ºæœŸå¾…å€¤è¡¨ç¤º
st.subheader("æœŸå¾…å€¤åˆ†æ")
st.write(f"æœŸå¾…å€¤: {expected_value:.2%}")
st.write(f"æ¨å¥¨: {'ãƒ™ãƒƒãƒˆ' if expected_value > 0.1 else 'è¦‹é€ã‚Š'}")

# 2. è¤‡å‹äºˆæ¸¬è¡¨ç¤º
st.subheader("è¤‡å‹äºˆæ¸¬")
place_prob = place_model.predict_proba(X_test)[:, 1]
st.write(f"3ç€ä»¥å†…ç¢ºç‡: {place_prob:.2%}")

# 3. ä¼šå ´åˆ¥ãƒ¢ãƒ‡ãƒ«ã®é¸æŠ
venue = st.selectbox("ä¼šå ´", list(range(1, 25)))
if os.path.exists(f"models/stage2_venue_{venue:02d}.json"):
    model = load_venue_model(venue)
    st.success(f"ä¼šå ´{venue:02d}å°‚ç”¨ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨")
```

**å®Ÿè¡Œç¢ºèª**:
```bash
streamlit run src/ui/streamlit_app.py
```

#### 6. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœŸé–“ã®å»¶é•·ï¼ˆ1æ™‚é–“ï¼‰

**ç¾çŠ¶**: 1ãƒ¶æœˆã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã¿

**æ”¹å–„æ¡ˆ**: 6ãƒ¶æœˆã®ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ

```python
# æ–°è¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: rolling_backtest.py
test_periods = [
    ("2024-06-01", "2024-06-30"),
    ("2024-07-01", "2024-07-31"),
    ("2024-08-01", "2024-08-31"),
    ("2024-09-01", "2024-09-30"),
    ("2024-10-01", "2024-10-31"),
    ("2024-11-01", "2024-11-30"),
]

results = []
for start, end in test_periods:
    # å„æœˆã§ãƒ†ã‚¹ãƒˆ
    auc, hit_rate = evaluate_model(start, end)
    results.append({"period": start, "auc": auc, "hit_rate": hit_rate})

# æœˆåˆ¥ã®æ€§èƒ½ã‚’ç¢ºèª
df_results = pd.DataFrame(results)
print(df_results)
```

### ã€å„ªå…ˆåº¦ï¼šä¸­ã€‘ãƒ¢ãƒ‡ãƒ«æ”¹å–„å®Ÿé¨“

#### 7. CatBoostã®è¿½åŠ ï¼ˆ30åˆ†ï¼‰

**ç›®çš„**: LightGBMã€XGBoostã«ç¶šãç¬¬3ã®GBDT

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install catboost

# å®Ÿé¨“#020ã‚’æ‹¡å¼µ
# train_multimodel_ensemble.py ã«CatBoostè¿½åŠ 
```

```python
from catboost import CatBoostClassifier

model_cat = CatBoostClassifier(
    depth=4,
    learning_rate=0.016,
    iterations=700,
    verbose=False
)

# 3ãƒ¢ãƒ‡ãƒ«ã®ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«
y_pred_ensemble = 0.33*y_pred_xgb + 0.33*y_pred_lgb + 0.34*y_pred_cat
```

#### 8. TabNetã®å®Ÿè£…ï¼ˆ1æ™‚é–“ï¼‰

**ç›®çš„**: è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿å‘ã‘ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pytorch-tabnet

# æ–°è¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
```

```python
from pytorch_tabnet.tab_model import TabNetClassifier

model = TabNetClassifier(
    n_d=64, n_a=64,
    n_steps=5,
    gamma=1.5,
    n_independent=2, n_shared=2
)

model.fit(X_train, y_train)
```

#### 9. ç‰¹å¾´é‡ã®è¿½åŠ å®Ÿé¨“ï¼ˆ2æ™‚é–“ï¼‰

**æ–°è¦ç‰¹å¾´é‡å€™è£œ**:

```python
# 1. ãƒ¬ãƒ¼ã‚¹å†…ã®ç›¸å¯¾é †ä½ï¼ˆã‚ˆã‚Šè©³ç´°ï¼‰
df['racer_age_rank'] = df.groupby('race_id')['racer_age'].rank()
df['racer_weight_rank'] = df.groupby('race_id')['racer_weight'].rank()

# 2. äº¤äº’ä½œç”¨ç‰¹å¾´é‡
df['win_rate_x_motor_rate'] = df['win_rate'] * df['motor_second_rate']
df['pit_x_course'] = df['pit_number'] * df['actual_course']

# 3. ä¼šå ´ç‰¹æ€§
venue_win_rates = df.groupby('venue_code')['is_win'].mean()
df['venue_avg_win_rate'] = df['venue_code'].map(venue_win_rates)

# 4. å¤©å€™ã¨ã®äº¤äº’ä½œç”¨
df['wind_speed_x_pit'] = df['wind_speed'] * df['pit_number']
df['wave_height_x_motor'] = df['wave_height'] * df['motor_second_rate']
```

### ã€å„ªå…ˆåº¦ï¼šä½ã€‘å®Ÿæˆ¦é‹ç”¨æº–å‚™

#### 10. å®Ÿã‚ªãƒƒã‚ºAPIã®çµ±åˆï¼ˆ3æ™‚é–“ï¼‰

**å¿…è¦ãªAPI**:
- BOATRACEå…¬å¼ã‚ªãƒƒã‚ºAPIï¼ˆå­˜åœ¨ã™ã‚‹ã‹è¦ç¢ºèªï¼‰
- ã¾ãŸã¯ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆè¦ç´„ç¢ºèªå¿…é ˆï¼‰

**å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸**:
```python
import requests

def fetch_odds(race_id, pit_number):
    """å®Ÿéš›ã®ã‚ªãƒƒã‚ºã‚’å–å¾—"""
    url = f"https://api.boatrace.jp/odds/{race_id}/{pit_number}"
    response = requests.get(url)
    return response.json()['odds']

# odds_value_analyzer.py ã‚’ä¿®æ­£
df['actual_odds'] = df.apply(
    lambda row: fetch_odds(row['race_id'], row['pit_number']),
    axis=1
)
```

#### 11. è‡ªå‹•ãƒ™ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼ˆè¦æ…é‡æ¤œè¨ï¼‰

**è­¦å‘Š**: æ³•çš„ãƒ»å€«ç†çš„ãƒªã‚¹ã‚¯ã‚’ååˆ†ã«æ¤œè¨ã™ã‚‹ã“ã¨

```python
# å®Ÿè£…ã¯æ§ãˆã‚ã«
def should_bet(win_prob, odds, threshold=0.1):
    """ãƒ™ãƒƒãƒˆã™ã¹ãã‹åˆ¤å®š"""
    expected_value = win_prob * odds - 1.0
    return expected_value > threshold

# å®Ÿéš›ã®è³­ã‘ã¯æ‰‹å‹•ã§è¡Œã†ã“ã¨ã‚’æ¨å¥¨
```

#### 12. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ2æ™‚é–“ï¼‰

```python
# streamlit_app.py ã«è‡ªå‹•æ›´æ–°æ©Ÿèƒ½

import time

st.title("ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ¼ã‚¹ç›£è¦–")

placeholder = st.empty()

while True:
    # æœ€æ–°ãƒ¬ãƒ¼ã‚¹ã‚’å–å¾—
    latest_races = get_upcoming_races()

    with placeholder.container():
        for race in latest_races:
            pred = model.predict(race)
            odds = fetch_odds(race['id'])
            ev = pred * odds - 1.0

            if ev > 0.1:
                st.success(f"ãƒ¬ãƒ¼ã‚¹{race['id']}: EV {ev:.2%} - ãƒ™ãƒƒãƒˆæ¨å¥¨")

    time.sleep(60)  # 1åˆ†ã”ã¨ã«æ›´æ–°
```

---

## ğŸ”§ æŠ€è¡“çš„ãªæ”¹å–„ç‚¹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### 1. ç‰¹å¾´é‡è¨ˆç®—ã®é«˜é€ŸåŒ–

**ç¾çŠ¶**: ç›´è¿‘æˆç¸¾è¨ˆç®—ãŒé…ã„ï¼ˆæ•°æ™‚é–“ï¼‰

**æ”¹å–„æ¡ˆ1**: Numbaã§é«˜é€ŸåŒ–
```python
from numba import jit

@jit(nopython=True)
def calculate_recent_stats(racer_history, n=3):
    """ç›´è¿‘næˆ¦ã®çµ±è¨ˆã‚’Numbaã§é«˜é€Ÿè¨ˆç®—"""
    if len(racer_history) < n:
        return np.nan, np.nan

    recent = racer_history[:n]
    avg_rank = np.mean(recent)
    win_rate = np.sum(recent == 1) / n * 100
    return avg_rank, win_rate
```

**æ”¹å–„æ¡ˆ2**: äº‹å‰è¨ˆç®—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥
```python
# racer_stats_cache.pkl ã¨ã—ã¦ä¿å­˜
racer_stats = {}
for racer in all_racers:
    stats = calculate_all_stats(racer)
    racer_stats[racer] = stats

pickle.dump(racer_stats, open('racer_stats_cache.pkl', 'wb'))
```

#### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®è¿½åŠ 

```sql
-- SQLiteã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
CREATE INDEX idx_race_date ON races(race_date);
CREATE INDEX idx_racer_number ON entries(racer_number);
CREATE INDEX idx_race_id_pit ON results(race_id, pit_number);

-- ã‚¯ã‚¨ãƒªã®é«˜é€ŸåŒ–ç¢ºèª
EXPLAIN QUERY PLAN
SELECT * FROM entries WHERE race_id = ?;
```

### ã‚³ãƒ¼ãƒ‰ã®æ•´ç†

#### 1. å…±é€šå‡¦ç†ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–

**ç¾çŠ¶**: å„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’é‡è¤‡

**æ”¹å–„æ¡ˆ**: src/utils/data_loader.py ã‚’ä½œæˆ
```python
# src/utils/data_loader.py

class BoatRaceDataLoader:
    def __init__(self, db_path='data/boatrace.db'):
        self.db_path = db_path

    def load_dataset(self, start_date, end_date, venue_codes=None):
        """çµ±ä¸€ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿å–å¾—"""
        # å…±é€šã®SQLã‚¯ã‚¨ãƒª
        pass

    def add_features(self, df):
        """çµ±ä¸€ã•ã‚ŒãŸç‰¹å¾´é‡è¿½åŠ """
        # ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç‰¹å¾´é‡
        # ãƒ¬ãƒ¼ã‚¹å†…ç›¸å¯¾ç‰¹å¾´é‡
        # äº¤äº’ä½œç”¨ç‰¹å¾´é‡
        pass

    def preprocess(self, X):
        """çµ±ä¸€ã•ã‚ŒãŸå‰å‡¦ç†"""
        # æ¬ æå€¤å‡¦ç†
        # ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆDLç”¨ï¼‰
        pass
```

**ä½¿ç”¨ä¾‹**:
```python
from src.utils.data_loader import BoatRaceDataLoader

loader = BoatRaceDataLoader()
df_train = loader.load_dataset("2023-06-01", "2024-05-31")
df_train = loader.add_features(df_train)
```

#### 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å°å…¥

**config.yaml**:
```yaml
data:
  train_start: "2023-06-01"
  train_end: "2024-05-31"
  test_start: "2024-06-01"
  test_end: "2024-06-30"
  db_path: "data/boatrace.db"

model:
  type: "xgboost"
  params:
    max_depth: 4
    learning_rate: 0.016
    n_estimators: 700

features:
  baseline: true
  relative_strength: true
  recent_performance: false  # è¨ˆç®—ã‚³ã‚¹ãƒˆå¤§
  timeseries: false  # æ€§èƒ½ä½ä¸‹

betting:
  strategies:
    conservative:
      min_prob: 0.8
      min_ev: 0.0
    balanced:
      min_prob: 0.0
      min_ev: 0.1
```

**ä½¿ç”¨ä¾‹**:
```python
import yaml

with open('config.yaml', 'r', encoding='utf-8') as f:
    config = yaml.safe_load(f)

train_start = config['data']['train_start']
model_params = config['model']['params']
```

---

## ğŸ“Š ç¾åœ¨ã®æ€§èƒ½ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

### ãƒ¢ãƒ‡ãƒ«æ€§èƒ½æ¯”è¼ƒè¡¨

| ãƒ¢ãƒ‡ãƒ« | AUC | Log Loss | çš„ä¸­ç‡(0.8+) | å¯¾è±¡ | è©•ä¾¡ |
|--------|-----|----------|-------------|------|------|
| å®Ÿé¨“#012 (XGB Optuna) | **0.8496** | 0.3179 | **87.72%** | å…¨ä¼šå ´ | â­ ãƒ™ã‚¹ãƒˆ |
| å®Ÿé¨“#011 (XGB 12m) | 0.8477 | - | 85.42% | å…¨ä¼šå ´ | è‰¯å¥½ |
| å®Ÿé¨“#020 (LGB) | 0.8492 | 0.3184 | 87.27% | å…¨ä¼šå ´ | ã»ã¼åŒç­‰ |
| å®Ÿé¨“#018 (å˜å‹) | 0.8538 | - | 65.38% | å…¨ä¼šå ´ | å‚è€ƒ |
| å®Ÿé¨“#016 (ä¼šå ´07) | **0.9341** | - | 90.00% | ä¼šå ´07ã®ã¿ | ç‰¹å®šä¼šå ´æœ€å¼· |
| å®Ÿé¨“#016 (å¹³å‡) | 0.8324 | - | - | Top5ä¼šå ´ | çµ±åˆã«åŠ£ã‚‹ |

### è³­ã‘æˆ¦ç•¥æ€§èƒ½æ¯”è¼ƒ

| æˆ¦ç•¥ | çš„ä¸­ç‡ | ROI | ãƒ¬ãƒ¼ã‚¹æ•°/æœˆ | æœˆé–“æœŸå¾…åˆ©ç›Š* | è©•ä¾¡ |
|------|--------|-----|------------|--------------|------|
| ä¿å®ˆçš„ (0.8+&EV+) | 85.71% | 47.10% | 42 | +19,782å†† | å®‰å…¨ |
| ãƒãƒ©ãƒ³ã‚¹ (EV+10%+) | 25.02% | 45.35% | 2,350 | +1,065,725å†† | æ¨å¥¨ |
| ç©´ç‹™ã„ (0.3+&EV+20%+) | 60.46% | 46.63% | 521 | +242,937å†† | ä¸­ãƒªã‚¹ã‚¯ |
| è¤‡å‹ (0.8+) | 92.22% | (ä½) | 668 | - | å®‰å®š |

*æœˆé–“æœŸå¾…åˆ©ç›Š = ãƒ¬ãƒ¼ã‚¹æ•° Ã— 1000å†† Ã— ROIï¼ˆä»®å®šï¼‰

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### å®Ÿæˆ¦é‹ç”¨æ™‚ã®ãƒªã‚¹ã‚¯

1. **éå­¦ç¿’ãƒªã‚¹ã‚¯**
   - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿1ãƒ¶æœˆã¯ä¸ååˆ†
   - æœ€ä½6ãƒ¶æœˆã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ¨å¥¨
   - å®Ÿæˆ¦ã§ã®æ€§èƒ½ã¯ä½ä¸‹ã™ã‚‹å¯èƒ½æ€§

2. **ã‚ªãƒƒã‚ºã®å•é¡Œ**
   - ç¾åœ¨ã¯ä»®æƒ³ã‚ªãƒƒã‚ºï¼ˆå®Ÿéš›ã¨ã¯ç•°ãªã‚‹ï¼‰
   - äººæ°—é¦¬ã¯éå°ã‚ªãƒƒã‚ºã€ç©´é¦¬ã¯éå¤§ã‚ªãƒƒã‚ºã«ãªã‚ŠãŒã¡
   - ç· åˆ‡ç›´å‰ã®ã‚ªãƒƒã‚ºå¤‰å‹•ãŒå¤§ãã„

3. **äºˆæ¸¬ä¸å¯èƒ½ãªè¦ç´ **
   - äº‹æ•…ãƒ»å¤±æ ¼
   - é¸æ‰‹ã®ä½“èª¿å¤‰åŒ–
   - å¤©å€™ã®æ€¥å¤‰
   - ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®ä¸èª¿

4. **è³‡é‡‘ç®¡ç†ã®é‡è¦æ€§**
   - ROI 47%ã§ã‚‚é€£æ•—æ™‚ã®æå¤±ã¯å¤§ãã„
   - ã‚±ãƒªãƒ¼åŸºæº–ã®25-50%ã‚’æ¨å¥¨
   - è³‡é‡‘ã®5%ä»¥ä¸Šã‚’1ãƒ¬ãƒ¼ã‚¹ã«æŠ•å…¥ã—ãªã„

5. **æ³•çš„ãƒ»å€«ç†çš„é…æ…®**
   - å…¬å–¶ç«¶æŠ€ã¨ã—ã¦èªã‚ã‚‰ã‚ŒãŸç¯„å›²å†…
   - å¤§è¦æ¨¡ãƒ»çµ„ç¹”çš„ãªè³­åšã¯é¿ã‘ã‚‹
   - ä¾å­˜ç—‡ãƒªã‚¹ã‚¯ã«æ³¨æ„

### ãƒ‡ãƒ¼ã‚¿ã®é™ç•Œ

1. **ãƒ‡ãƒ¼ã‚¿æœŸé–“**
   - 2023-06 ã€œ 2024-06ã®13ãƒ¶æœˆã®ã¿
   - ã‚ˆã‚Šé•·æœŸã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°ç²¾åº¦å‘ä¸Š

2. **æ¬ æãƒ‡ãƒ¼ã‚¿**
   - weather ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ¬ æãŒå¤šã„
   - ä¸€éƒ¨ã® race_details ãŒæ¬ æ

3. **ç‰¹å¾´é‡ã®é™ç•Œ**
   - é¸æ‰‹ã®æœ€æ–°ã®èª¿å­ã¯åæ˜ ã•ã‚Œãªã„
   - ãƒ¢ãƒ¼ã‚¿ãƒ¼äº¤æ›æ™‚æœŸã¯è€ƒæ…®ã•ã‚Œã¦ã„ãªã„

---

## ğŸ“ æ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®ç¢ºèªäº‹é …

### ã™ãã«ç¢ºèªã™ã‚‹ã“ã¨

1. âœ… å®Ÿé¨“#021ï¼ˆå…¨ä¼šå ´ãƒ¢ãƒ‡ãƒ«ï¼‰ã®å®Œäº†ç¢ºèª
   ```bash
   cat all_venues_output.log | tail -50
   ```

2. ğŸ“Š å„ä¼šå ´ã®AUCä¸€è¦§ã‚’ç¢ºèª
   - çµ±åˆãƒ¢ãƒ‡ãƒ«ã‚’ä¸Šå›ã‚‹ä¼šå ´ã¯ã„ãã¤ã‚ã‚‹ã‹
   - æœ€é«˜æ€§èƒ½ã®ä¼šå ´ã¯ã©ã“ã‹

3. ğŸ” ã‚¹ã‚­ãƒƒãƒ—ã•ã‚ŒãŸä¼šå ´ã®ç†ç”±
   - ãƒ‡ãƒ¼ã‚¿é‡ä¸è¶³ã®ä¼šå ´æ•°
   - ä»Šå¾Œã®ãƒ‡ãƒ¼ã‚¿åé›†è¨ˆç”»

### æ¤œè¨ã™ã¹ãæ–¹å‘æ€§

**Option A: æ€§èƒ½è¿½æ±‚å‹**
- ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã€TabNetã€CatBoostã®è¿½åŠ 
- ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æ·±åŒ–
- ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã®å¤šæ§˜åŒ–
- ç›®æ¨™: AUC 0.86+

**Option B: å®Ÿæˆ¦é‹ç”¨å‹**
- å®Ÿã‚ªãƒƒã‚ºAPIã®çµ±åˆ
- ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœŸé–“ã®å»¶é•·ï¼ˆ6ãƒ¶æœˆï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
- ç›®æ¨™: å®Ÿè¨¼å®Ÿé¨“ã§æœˆROI +10%

**Option C: ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„å‹**
- ã‚³ãƒ¼ãƒ‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®è‡ªå‹•åŒ–
- UIã®æ”¹å–„
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

### å®Ÿé¨“ã®å„ªå…ˆé †ä½

**ã™ãã§ãã‚‹ï¼ˆ30åˆ†ä»¥å†…ï¼‰**:
1. å®Ÿé¨“#021ã®çµæœç¢ºèª
2. ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œï¼ˆTensorFlowã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œï¼‰

**1-2æ™‚é–“ã§ã§ãã‚‹**:
3. Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ”¹å–„
4. CatBoostã®è¿½åŠ 
5. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœŸé–“å»¶é•·

**æ•°æ™‚é–“ã‹ã‹ã‚‹**:
6. ç›´è¿‘æˆç¸¾ç‰¹å¾´é‡ã®å…¨ãƒ‡ãƒ¼ã‚¿å®Ÿè¡Œ
7. å®Ÿã‚ªãƒƒã‚ºAPIã®çµ±åˆ
8. TabNetã®å®Ÿè£…

**æ˜æ—¥ä»¥é™**:
9. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ›´æ–°ï¼ˆæœ€æ–°ãƒ‡ãƒ¼ã‚¿ã«ï¼‰
10. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
11. é•·æœŸãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ6ãƒ¶æœˆï¼‰

---

## ğŸ’¡ æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ˜æ—¥ã®æœ€åˆã®30åˆ†ï¼‰

```bash
# 1. å®Ÿé¨“#021ã®çµæœç¢ºèªï¼ˆ5åˆ†ï¼‰
cat all_venues_output.log

# 2. ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®å®Ÿè¡Œæº–å‚™ï¼ˆ5åˆ†ï¼‰
pip install tensorflow

# 3. ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œï¼ˆ15åˆ†ï¼‰
python train_deep_learning_model.py

# 4. çµæœã®æ¯”è¼ƒï¼ˆ5åˆ†ï¼‰
echo "å®Ÿé¨“#012: AUC 0.8496"
echo "å®Ÿé¨“#020: AUC 0.8492"
echo "å®Ÿé¨“#021: ï¼ˆall_venues_output.logã§ç¢ºèªï¼‰"
echo "å®Ÿé¨“#022: ï¼ˆå®Ÿè¡Œå¾Œç¢ºèªï¼‰"
```

---

## ğŸ¯ é•·æœŸçš„ãªç›®æ¨™ï¼ˆ1-3ãƒ¶æœˆï¼‰

### æ€§èƒ½ç›®æ¨™
- [ ] AUC 0.86+ ã®é”æˆ
- [ ] å®Ÿæˆ¦ã§ã®æœˆROI +10%ä»¥ä¸Šã®å®Ÿè¨¼
- [ ] è¤‡æ•°æˆ¦ç•¥ã§ã®å®‰å®šã—ãŸåç›Š

### ã‚·ã‚¹ãƒ†ãƒ ç›®æ¨™
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã®å®Œæˆ
- [ ] å®Ÿã‚ªãƒƒã‚ºAPIã®çµ±åˆ
- [ ] è‡ªå‹•ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆåŸºç›¤

### ãƒ“ã‚¸ãƒã‚¹ç›®æ¨™
- [ ] å°‘é¡å®Ÿè¨¼å®Ÿé¨“ï¼ˆæœˆ1ä¸‡å††ï¼‰ã§ã®æ¤œè¨¼
- [ ] 6ãƒ¶æœˆã®å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿åé›†
- [ ] ãƒªã‚¹ã‚¯ç®¡ç†ä½“åˆ¶ã®ç¢ºç«‹

---

## ğŸ“š å‚è€ƒè³‡æ–™

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `FINAL_COMPREHENSIVE_REPORT.md`: å…¨ä½“ã®ç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆ
- `IMPROVEMENTS_COMPREHENSIVE_REPORT.md`: å®Ÿé¨“#013-#017ã®è©³ç´°
- å„ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«: å®Ÿé¨“ã®è©³ç´°ãªå‡ºåŠ›

### å¤–éƒ¨è³‡æ–™
- XGBoostå…¬å¼: https://xgboost.readthedocs.io/
- LightGBMå…¬å¼: https://lightgbm.readthedocs.io/
- Optunaå…¬å¼: https://optuna.readthedocs.io/
- ç«¶è‰‡å…¬å¼: https://www.boatrace.jp/

### ã‚³ãƒãƒ³ãƒ‰ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```bash
# ãƒ¢ãƒ‡ãƒ«å­¦ç¿’
python train_stage2_optimized.py           # ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«å†å­¦ç¿’
python train_all_venues.py                 # å…¨ä¼šå ´ãƒ¢ãƒ‡ãƒ«
python train_deep_learning_model.py        # DLãƒ¢ãƒ‡ãƒ«

# è©•ä¾¡ãƒ»åˆ†æ
python odds_value_analyzer.py              # ã‚ªãƒƒã‚ºæœŸå¾…å€¤åˆ†æ
python train_place_and_trifecta_models.py  # è¤‡å‹ãƒ»3é€£å˜

# UIèµ·å‹•
streamlit run src/ui/streamlit_app.py

# ãƒ‡ãƒ¼ã‚¿ç¢ºèª
sqlite3 data/boatrace.db ".tables"
sqlite3 data/boatrace.db "SELECT COUNT(*) FROM races;"

# ãƒ­ã‚°ç¢ºèª
cat all_venues_output.log
cat place_trifecta_output.log

# ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -lh models/
```

---

**æœ€çµ‚æ›´æ–°**: 2025-11-14 00:35
**æ¬¡å›ç¢ºèªæ¨å¥¨**: å®Ÿé¨“#021å®Œäº†å¾Œï¼ˆç´„30åˆ†å¾Œï¼‰

---

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ã„ã¤ã§ã‚‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¾çŠ¶æŠŠæ¡ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®æ±ºå®šãŒå¯èƒ½ã§ã™ã€‚
